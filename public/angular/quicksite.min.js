(function(){angular.module("quicksite",[]);angular.module("quicksite",["ngRoute","ngSanitize","ui.bootstrap"]);function e(e,t){e.when("/",{templateUrl:"/home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).when("/about",{templateUrl:"/common/views/generic.view.html",controller:"aboutCtrl",controllerAs:"vm"}).when("/location/:locationid",{templateUrl:"/locationDetail/location-detail-template.html",controller:"locationDetailCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"});t.html5Mode({enabled:true,requireBase:false})}angular.module("quicksite").config(["$routeProvider","$locationProvider",e])})();(function(){angular.module("quicksite").controller("homeCtrl",e);e.$inject=["$scope","siteData","geolocation"];function e(e,t,i){if(window.location.pathname!=="/"){window.location.href="/#"+window.location.pathname}var o=this;o.pageHeader={title:"Siteeeeeeeeee",strapline:"Lorem ipsum dolor sit amet"};o.sidebar={content:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Voluptatum a eveniet est ea. Debitis perspiciatis officiis perferendis veritatis ducimus consequatur ipsum accusamus odit sit id natus dolores a eius suscipit qui, est veniam ipsam repellendus. Neque voluptatem sed eum dolorem id nisi tenetur dolores, accusantium, autem nostrum laudantium, quod maiores?"};o.message="Checking for place";o.getData=function(e){var i=e.coords.longitude,a=e.coords.latitude;o.message="Searching for near place";t.locationsByCoords(a,i).then(n,r);function n(e){o.message=e.length>0?"":"NO locaionts found!";o.data={locations:e.data}}function r(e){o.message="Sorry, somethingis goes wrong"}};o.showError=function(t){e.$apply(function(){o.message=t.message})};o.noGeo=function(){e.$apply(function(){o.message="Geolocation not supported by this browser"})};i.getPosition(o.getData,o.showError,o.noGeo)}})();(function(){angular.module("quicksite").controller("aboutCtrl",e);function e(){var e=this;e.pageHeader={title:"About Quicksite"};e.main={content:"Lorem ipsum dolor sit amet, \n\nconsectetur adipisicing elit. Iusto repudiandae modi neque delectus beatae, aspernatur cupiditate sint, expedita cum repellendus, aperiam placeat, in ducimus itaque provident est commodi vero tempore fuga reprehenderit eaque consectetur facilis veniam. Blanditiis culpa sed, earum corrupti ipsa, minus molestiae reprehenderit fugiat maxime dolore \n\nullam eius facilis saepe. Dolorem nisi molestiae voluptate sint quae dolor soluta pariatur, enim esse facilis perferendis debitis non sapiente? Vel, dolor sequi veritatis impedit autem magnam, nisi doloremque eveniet voluptates ab dolores in quasi nemo molestiae itaque sit eos consequuntur labore adipisci, ipsa accusantium atque! Explicabo suscipit pariatur sapiente ipsum maiores."}}})();(function(){angular.module("quicksite").controller("reviewModalCtrl",e);e.$inject=["$uibModalInstance","siteData","locationData"];function e(e,t,i){var o=this;o.locationData=i;o.modal={cancel:function(){e.dismiss("cancel")},close:function(t){e.close(t)}};o.onSubmit=function(){o.formError="";if(!o.formData.name||!o.formData.rating||!o.formData.reviewText){o.formError="All fields required, please try again!";return false}else{o.doAddReview(o.locationData.locationid,o.formData)}};o.doAddReview=function(e,i){t.addReviewById(e,{author:i.name,rating:i.rating,reviewText:i.reviewText}).then(a,n);function a(e){console.log("Success");o.modal.close(e)}function n(e){o.formError="your review has not been saved, try again"}return false}}})();(function(){angular.module("quicksite").controller("locationDetailCtrl",e);e.$inject=["$routeParams","$uibModal","siteData"];function e(e,t,i){var o=this;o.locationid=e.locationid;i.locationsById(o.locationid).then(a,n);function a(e){o.data={location:e.data};o.pageHeader={title:o.data.location.name}}function n(e){console.log(e)}o.popupReviewForm=function(){var e=t.open({animation:true,templateUrl:"/reviewModal/reviewModal.view.html",controller:"reviewModalCtrl",controllerAs:"vm",resolve:{locationData:function(){return{locationid:o.locationid,locationName:o.data.location.name}}}});e.result.then(function(e){o.data.location.reviews.push(e)})}}})();(function(){angular.module("quicksite").service("geolocation",e);function e(){var e=function(e,t,i){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(e,t)}else{i()}};return{getPosition:e}}})();(function(){angular.module("quicksite").service("siteData",e);e.$inject=["$http"];function e(e){var t=function(t,i){return e({method:"GET",url:"/api/locations?lng="+i+"&lat="+t+"&maxDistance=90000000000000"})};var i=function(t){return e({method:"GET",url:"/api/locations/"+t})};var o=function(t,i){return e({method:"POST",url:"/api/locations/"+t+"/reviews",data:$.param(i),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};return{locationsByCoords:t,locationsById:i,addReviewById:o}}})();(function(){angular.module("quicksite").filter("formatDistance",t);var e=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};function t(){return function(t){var i,o;if(t&&e(t)){if(t>1){i=parseFloat(t).toFixed(1);o="km"}else{i=parseInt(t*1e3,10);o="m"}return i+o}else{return"?"}}}})();(function(){angular.module("quicksite").filter("addHtmlLineBreaks",e);function e(){return function(e){var t=e.replace(/\n/g,"<br/>");return t}}})();(function(){angular.module("quicksite").directive("navigation",e);function e(){return{restrict:"EA",templateUrl:"/common/directives/navigation/navigation.template.html"}}})();(function(){angular.module("quicksite").directive("footerGeneric",e);function e(){return{restrict:"EA",templateUrl:"/common/directives/footerGeneric/footer-generic-template.html"}}})();(function(){angular.module("quicksite").directive("pageHeader",e);function e(){return{restrict:"EA",scope:"=content",templateUrl:"/common/directives/pageHeader/page-header.template.html"}}})();(function(){angular.module("quicksite").directive("ratingStars",e);function e(){return{restrict:"A",scope:{thisRating:"=rating"},templateUrl:"/common/directives/ratingStars/rating-stars.template.html"}}})();